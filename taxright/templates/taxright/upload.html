{% extends 'base.html' %}

{% block title %}Upload Invoice - TaxRight{% endblock %}

{% block extra_css %}
<style>
    .upload-form {
        max-width: 600px;
        margin: 0 auto;
        padding: 2rem;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #495057;
    }
    
    .form-group input,
    .form-group select {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid #e9ecef;
        border-radius: 6px;
        font-size: 1rem;
        transition: border-color 0.3s;
    }
    
    .form-group input:focus,
    .form-group select:focus {
        outline: none;
        border-color: #667eea;
    }
    
    .file-upload-area {
        border: 2px dashed #667eea;
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        background: #f8f9fa;
        transition: background 0.3s;
    }
    
    .file-upload-area:hover {
        background: #e9ecef;
    }
    
    .file-upload-area input[type="file"] {
        display: none;
    }
    
    .file-upload-label {
        cursor: pointer;
        display: block;
        padding: 1rem;
    }
    
    .file-upload-icon {
        font-size: 3rem;
        color: #667eea;
        margin-bottom: 1rem;
    }
    
    .help-text {
        font-size: 0.85rem;
        color: #6c757d;
        margin-top: 0.5rem;
    }
    
    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }
</style>
{% endblock %}

{% block content %}
<div style="padding: 2rem 0;">
    <div style="margin-bottom: 1rem;">
        <a href="{% url 'taxright:dashboard' %}" class="btn btn-secondary">‚Üê Back to Dashboard</a>
    </div>
    
    <div class="upload-form">
        <h2 style="margin-bottom: 2rem; color: #667eea;">Upload Invoice</h2>
        
        <form method="post" enctype="multipart/form-data" id="upload-form">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="id_pdf_file">Invoice PDF File *</label>
                <div class="file-upload-area">
                    <label for="id_pdf_file" class="file-upload-label">
                        <div class="file-upload-icon">üìÑ</div>
                        <div id="file-label-text">Click to select PDF file</div>
                        <div class="help-text" style="margin-top: 0.5rem;">Accepted: PDF files only. Invoice data will be extracted automatically.</div>
                    </label>
                    <input type="file" name="pdf_file" id="id_pdf_file" accept=".pdf" required>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn" id="submit-btn">Upload & Process Invoice</button>
                <a href="{% url 'taxright:dashboard' %}" class="btn btn-secondary">Cancel</a>
            </div>
            
            <div id="processing-status" style="display: none; margin-top: 1rem; padding: 1rem; background: #e7f3ff; border-radius: 6px;">
                <p style="margin: 0; color: #084298;">
                    <strong>Processing invoice...</strong> This may take a few moments.
                </p>
            </div>
        </form>
    </div>
</div>

<script>
    // Update file upload area to show selected file name
    document.getElementById('id_pdf_file').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            document.getElementById('file-label-text').innerHTML = `<strong>${file.name}</strong>`;
        }
    });
    
    // Show processing status on form submit
    document.getElementById('upload-form').addEventListener('submit', function(e) {
        const submitBtn = document.getElementById('submit-btn');
        const statusDiv = document.getElementById('processing-status');
        submitBtn.disabled = true;
        submitBtn.textContent = 'Processing...';
        statusDiv.style.display = 'block';
    });
</script>
{% endblock %}

